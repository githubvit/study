{% extends 'master.html' %}
{% block css %}
<style>

    /*瓷画网广告栏和背景*/
    .wbg{
        background-color: white;
        margin-bottom: 0;
    }
    .jumbotron1 {
        padding-top: 48px;
        padding-bottom: 48px;
        color: inherit;
    }
    .jumbotron1  h3 {
        margin-top: 5px;
    }
    .label-cs {/* 自定义label：去掉字体加重和颜色，让字体自适应 */
        display: inline;
        padding: .2em .6em .3em;
        font-size: 75%;
        /* font-weight:bold;*/
        line-height: 1;
        /* color: #fff; */
        text-align: center;
        white-space: nowrap;
        vertical-align: baseline;
        border-radius: .25em;
    }
{#    信息页面中年月日输入框#}
    .form-control-cs {
        display: inline-block;
        width: auto;
        vertical-align: middle;
        color: #555;
    }
    /*订单表各行高度方向居中*/
    .table tbody tr td{
        vertical-align: inherit;
    }
    /*订单中作品信息栏标签内嵌表中的表头位置下移*/
    th .table{
        margin-bottom: -12px;
    }
    /*订单中作品信息栏标签内嵌表中去掉下划线*/
    th .table>thead>tr>th {
        vertical-align: bottom;
        border-bottom: 0;
    }

    /*订单中作品信息栏内嵌表去掉上划线，加上下划线*/
    td .table tbody tr td{
        border-top: 0;
        border-bottom: 1px solid #ddd;
    }
</style>
{% endblock css %}
{% block cont %}
    <!-- 增加的内容-->
<!--1，瓷画网广告-->
    <div class="jumbotron1 wbg min_width">
        <div class="container">
            <div class="row">
                <div class="col-xs-offset-2 col-xs-2">
                    <a href="/">
                        <img src="/static/images/yhzx_logo.jpg">
                    </a>
                </div>
                <div class="col-xs-2">
                    <h3><span>瓷画网</span></h3>
                    <h4 class="text-center"><span style="display: inline-block;margin-right: 5px">|</span> 用户中心</h4>
                </div>
                <div class="col-xs-5">
                    <h2 style="font-size: 28px"><span>网天下瓷画 惠四海宾朋</span></h2>
                </div>
            </div>
        </div>
    </div>
<!--2，用户中心-->
    <div class="container min_width">
        <!--2.1，子页面标签导航-->
        <ul id="us-tabs" class="nav nav-tabs">
            <li class="active" ><a href="#" name="sit_userinfo">个人信息</a></li>
            <li><a href="#" name="order">全部订单</a></li>
            <li><a href="#" name="address">收货信息</a></li>
            <li><a href="#" name="safe">安全设置</a></li>
            <li><a href="#" name="message">我的定制</a></li>
            <li><a href="#" name="crfdinfo">我的众筹</a></li>
        </ul>
<!--3或2.2，用户中心详细子页面-->
    <!--用户中心 详细内容-->
        <div>
            <!--3.1个人信息-->
            <div class="sit-item" name="sit_userinfo">
                <div class="panel panel-default" style="margin-top: 10px">
                  <div class="panel-heading">基本信息</div>
                  <div class="panel-body min_width">
                    <p>账号：{{ user.uname}}</p>
                    <p>手机：{{ user.uphon|default:'还未设置' }}<button id="btn-phone" type="button" class="btn  btn-link">设置手机</button></p>
                    <p>邮箱：{{ user.uemail }}</p>
                    <p>默认收货地址：<span name="larea">{{ address.larea }}</span><span name="laddress">{{ address.laddress|default:'还未设置' }}</span> <button id="btn-address" type="button" class="btn  btn-link">编辑收货地址</button></p>
                    <!--如果数据库有所需信息，就呈现所需信息的值，不用呈现form表单，如果没有，就呈现-->
                    <form class="form-inline">
                        <p>您还可以完善以下个人信息，以便更好的为您服务，选择性别和出生日期后，点击
                            <button type="button" class="btn btn-default" >保存</button>
                        </p>
                        <p>
                            性别：
                            <label class="radio-inline"><input type="radio" value="0" name="gender">男</label>
                            <label class="radio-inline"><input type="radio" value="1" name="gender">女</label>
                        </p>
                        <p>
                            出生日期：

                            <select class="form-control-cs input-sm">
                                <option>--</option>
                                <option value="1979">1979</option>
                                <option value="1980">1980</option>
                                <option value="1981">1981</option>
                            </select>年

                            <select class="form-control-cs input-sm">
                                <option>--</option>
                                <option  value="12">12</option>
                                <option  value="11">11</option>
                                <option  value="10">10</option>
                            </select>月

                            <select class="form-control-cs input-sm">
                                <option>--</option>
                                <option value="31">31</option>
                                <option value="30">30</option>
                                <option value="29">29</option>

                            </select>日

                        </p>
                    </form>
                      <!--前端实现:
                            点击年标签，就开始为年下拉框生成下拉框数据从1900到2018
                            点击月标签，就开始为月下拉框生成下拉框数据从01到12
                            点击日标签，就开始为年下拉框生成下拉框数据从01到31
                            点击保存后，校验数据，通过后，将获取的值在前端呈现（删除form表单），同时传到后台数据库，

                      -->
                  </div>
                </div>
                <!--3.1最近浏览-->
                <div class="panel panel-default" style="margin-top: 10px">
                  <div class="panel-heading">最近浏览瓷画</div>
                  <div class="panel-body">
                    <div class="row">
                        <div class="col-xs-3">
                            <div class="thumbnail">
                                <img src="/static/images/g1.jpg" alt="通用的占位符缩略图">
                                <div class="caption">
                                    <h3>缩略图标签</h3>
                                    <p>一些示例文本。一些示例文本。</p>
                                    <div class="pull-right">
                                        <a href="#" class="btn btn-default" role="button">
                                           开始定制
                                        </a>
                                    </div>
	                    			<div class="clearfix"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-3">
                            <div class="thumbnail">
                                <img src="/static/images/g1.jpg" alt="通用的占位符缩略图">
                                <div class="caption">
                                    <h3>缩略图标签</h3>
                                    <p>一些示例文本。一些示例文本。</p>
                                    <div class="pull-right">
                                        <a href="#" class="btn btn-default" role="button">
                                           开始定制
                                        </a>
                                    </div>
	                    			<div class="clearfix"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-3">
                            <div class="thumbnail">
                                <img src="/static/images/g1.jpg" alt="通用的占位符缩略图">
                                <div class="caption">
                                    <h3>缩略图标签</h3>
                                    <p>一些示例文本。一些示例文本。</p>
                                    <div class="pull-right">
                                        <a href="#" class="btn btn-default" role="button">
                                           开始定制
                                        </a>
                                    </div>
	                    			<div class="clearfix"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-3">
                            <div class="thumbnail">
                                <img src="/static/images/g1.jpg" alt="通用的占位符缩略图">
                                <div class="caption">
                                    <h3>缩略图标签</h3>
                                    <p>一些示例文本。一些示例文本。</p>
                                    <div class="pull-right">
                                        <a href="#" class="btn btn-default" role="button">
                                           开始定制
                                        </a>
                                    </div>
	                    			<div class="clearfix"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
            </div>
            <!--3.2全部订单-->
            <div class="sit-item hidden" name="order">
                <!--未支付-->
                <div class="panel panel-default" style="margin-top: 10px">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3"><span class="label-cs">创建时间:2018-3-15 17:36:26</span></div>
                            <div class="col-xs-2"><span class="label-cs">订单号:12345645</span></div>
                        </div>
                    </div>
                         <!-- 对于订单Table处理，每一笔订单要根据状态分类呈现 -->
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead >
                                <tr >
                                    <th class="text-center" style="width: 55%;">作品信息<!--表头里的列写成th不是td-->
                                        <table  class="table">
                                         <thead>
                                            <tr>
                                                <th style="width: 20%">作品图片</th>
                                                <th style="width: 30%">规格尺寸</th>
                                                <th style="width: 20%">单价</th>
                                                <th style="width: 10%">数量</th>
                                                <th style="width: 20%">小计</th>
                                            </tr>
                                          </thead>
                                        </table>
                                    </th>
                                    <th class="text-center">总计</th>
                                    <th class="text-center">状态</th>
                                    <th class="text-center">操作和信息</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                  <td style="width: 55%">
                                      <table class="table">

                                          <tbody>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">8寸 头像1 作者sgq</td>
                                                <td style="width: 20%">500</td>
                                                <td style="width: 10%">1</td>
                                                <td style="width: 20%">500</td>
                                            </tr>

                                          </tbody>
                                      </table>
                                  </td>
                                  <td class="text-center">500</td>
                                  <td class="text-center">未支付</td>
                                  <td class="text-center">
                                      <button class="btn btn-default ">去支付</button>
                                  </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!--已付定金-->
                <div class="panel panel-default" style="margin-top: 10px">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3"><span class="label-cs">创建时间:2018-3-15 17:36:26</span></div>
                            <div class="col-xs-2"><span class="label-cs">订单号:12345645</span></div>
                        </div>
                    </div>
                         <!-- 对于订单Table处理，每一笔订单要根据状态分类呈现 -->
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead >
                                <tr >
                                    <th class="text-center" style="width: 55%;">作品信息<!--表头里的列写成th不是td-->
                                        <table  class="table">
                                         <thead>
                                            <tr>
                                                <th style="width: 20%">作品图片</th>
                                                <th style="width: 30%">规格尺寸</th>
                                                <th style="width: 20%">单价</th>
                                                <th style="width: 10%">数量</th>
                                                <th style="width: 20%">小计</th>
                                            </tr>
                                          </thead>
                                        </table>
                                    </th>
                                    <th class="text-center">总计</th>
                                    <th class="text-center">状态</th>
                                    <th class="text-center">操作和信息</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                  <td style="width: 55%">
                                      <table class="table">
                                          <tbody>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">8寸 头像1 作者sgq</td>
                                                <td style="width: 20%">500</td>
                                                <td style="width: 10%">1</td>
                                                <td style="width: 20%">500</td>
                                            </tr>
                                          </tbody>
                                      </table>
                                  </td>
                                  <td class="text-center">500</td>
                                  <td class="text-center">已付定金</td>
                                  <td class="text-center">
                                      等待图样确认
                                  </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!--图样待确认-->
                <div class="panel panel-default" style="margin-top: 10px">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3"><span class="label-cs">创建时间:2018-3-15 17:36:26</span></div>
                            <div class="col-xs-2"><span class="label-cs">订单号:12345645</span></div>
                        </div>
                    </div>
                         <!-- 对于订单Table处理，每一笔订单要根据状态分类呈现 -->
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead >
                                <tr >
                                    <th class="text-center" style="width: 55%;">作品信息<!--表头里的列写成th不是td-->
                                        <table  class="table">
                                         <thead>
                                            <tr>
                                                <th style="width: 20%">作品图片</th>
                                                <th style="width: 30%">规格尺寸</th>
                                                <th style="width: 20%">单价</th>
                                                <th style="width: 10%">数量</th>
                                                <th style="width: 20%">小计</th>
                                            </tr>
                                          </thead>
                                        </table>
                                    </th>
                                    <th class="text-center">总计</th>
                                    <th class="text-center">状态</th>
                                    <th class="text-center">操作和信息</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                  <td style="width: 55%">
                                      <table class="table">
                                          <tbody>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">8寸 头像1 作者sgq</td>
                                                <td style="width: 20%">500</td>
                                                <td style="width: 10%">1</td>
                                                <td style="width: 20%">500</td>
                                            </tr>
                                          </tbody>
                                      </table>
                                  </td>
                                  <td class="text-center">500</td>
                                  <td class="text-center">待确认</td>
                                  <td class="text-center">
                                      <button class="btn btn-default check-pt">查看图样</button>
                                      <button class="btn btn-default">确认图样</button>
                                  </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!--修改图样-->
                <div class="panel panel-default" style="margin-top: 10px">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3"><span class="label-cs">创建时间:2018-3-15 17:36:26</span></div>
                            <div class="col-xs-2"><span class="label-cs">订单号:12345645</span></div>
                        </div>
                    </div>
                         <!-- 对于订单Table处理，每一笔订单要根据状态分类呈现 -->
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead >
                                <tr >
                                    <th class="text-center" style="width: 55%;">作品信息<!--表头里的列写成th不是td-->
                                        <table  class="table">
                                         <thead>
                                            <tr>
                                                <th style="width: 20%">作品图片</th>
                                                <th style="width: 30%">规格尺寸</th>
                                                <th style="width: 20%">单价</th>
                                                <th style="width: 10%">数量</th>
                                                <th style="width: 20%">小计</th>
                                            </tr>
                                          </thead>
                                        </table>
                                    </th>
                                    <th class="text-center">总计</th>
                                    <th class="text-center">状态</th>
                                    <th class="text-center">操作和信息</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                  <td style="width: 55%">
                                      <table class="table">
                                          <tbody>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">8寸 头像1 作者sgq</td>
                                                <td style="width: 20%">500</td>
                                                <td style="width: 10%">1</td>
                                                <td style="width: 20%">500</td>
                                            </tr>
                                          </tbody>
                                      </table>
                                  </td>
                                  <td class="text-center">500</td>
                                  <td class="text-center">修改图样</td>
                                  <td class="text-center">
                                      等待图样确认
                                  </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!--已支付-->
                <div class="panel panel-default" style="margin-top: 10px">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3"><span class="label-cs">创建时间:2018-3-15 17:36:26</span></div>
                            <div class="col-xs-2"><span class="label-cs">订单号:12345645</span></div>
                        </div>
                    </div>
                         <!-- 对于订单Table处理，每一笔订单要根据状态分类呈现 -->
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead >
                                <tr >
                                    <th class="text-center" style="width: 55%;">作品信息<!--表头里的列写成th不是td-->
                                        <table  class="table">
                                         <thead>
                                            <tr>
                                                <th style="width: 20%">作品图片</th>
                                                <th style="width: 30%">规格尺寸</th>
                                                <th style="width: 20%">单价</th>
                                                <th style="width: 10%">数量</th>
                                                <th style="width: 20%">小计</th>
                                            </tr>
                                          </thead>
                                        </table>
                                    </th>
                                    <th class="text-center">总计</th>
                                    <th class="text-center">状态</th>
                                    <th class="text-center">操作和信息</th>
                                </tr>
                            </thead>

                            <tbody>

                                <tr>
                                  <td style="width: 55%">
                                      <table class="table">

                                          <tbody>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">8寸 头像1 作者sgq</td>
                                                <td style="width: 20%">500</td>
                                                <td style="width: 10%">1</td>
                                                <td style="width: 20%">500</td>
                                            </tr>

                                          </tbody>
                                      </table>


                                  </td>
                                  <td class="text-center">500</td>
                                  <td class="text-center">已支付</td>
                                  <td class="text-center">
                                      等待发货
                                  </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
                <!--已发货-->
                <div class="panel panel-default" style="margin-top: 10px">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3"><span class="label-cs">创建时间:2018-3-15 17:36:26</span></div>
                            <div class="col-xs-2"><span class="label-cs">订单号:12345645</span></div>
                        </div>
                    </div>
                         <!-- 对于订单Table处理，每一笔订单要根据状态分类呈现 -->
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead >
                                <tr >
                                    <th class="text-center" style="width: 55%;">作品信息<!--表头里的列写成th不是td-->
                                        <table  class="table">
                                         <thead>
                                            <tr>
                                                <th style="width: 20%">作品图片</th>
                                                <th style="width: 30%">规格尺寸</th>
                                                <th style="width: 20%">单价</th>
                                                <th style="width: 10%">数量</th>
                                                <th style="width: 20%">小计</th>
                                            </tr>
                                          </thead>
                                        </table>
                                    </th>
                                    <th class="text-center">总计</th>
                                    <th class="text-center">状态</th>
                                    <th class="text-center">操作和信息</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                  <td style="width: 55%">
                                      <table class="table">
                                          <tbody>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">8寸 头像1 作者sgq</td>
                                                <td style="width: 20%">500</td>
                                                <td style="width: 10%">1</td>
                                                <td style="width: 20%">500</td>
                                            </tr>
                                          </tbody>
                                      </table>
                                  </td>
                                  <td class="text-center">500</td>
                                  <td class="text-center">已发货</td>
                                  <td class="text-center">
                                      <button class="btn btn-default ">查看物流</button>
                                  </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
                <!--复杂订单-->
                <div class="panel panel-default" style="margin-top: 10px">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3"><span class="label-cs">创建时间:2018-3-15 17:36:26</span></div>
                            <div class="col-xs-2"><span class="label-cs">订单号:12345645</span></div>
                        </div>
                    </div>
                         <!-- 对于订单Table处理，每一笔订单要根据状态分类呈现 -->
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead >
                                <tr >
                                    <th class="text-center" style="width: 55%;">作品信息<!--表头里的列写成th不是td-->
                                        <table  class="table">
                                         <thead>
                                            <tr>
                                                <th style="width: 20%">作品图片</th>
                                                <th style="width: 30%">规格尺寸</th>
                                                <th style="width: 20%">单价</th>
                                                <th style="width: 10%">数量</th>
                                                <th style="width: 20%">小计</th>
                                            </tr>
                                          </thead>
                                        </table>
                                    </th>
                                    <th class="text-center">总计</th>
                                    <th class="text-center">状态</th>
                                    <th class="text-center">操作和信息</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                  <td style="width: 55%;">
                                      <table class="table">
                                          <tbody>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">8寸 头像1 作者sgq</td>
                                                <td style="width: 20%">500</td>
                                                <td style="width: 10%">1</td>
                                                <td style="width: 20%">500</td>
                                            </tr>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">9寸 头像1 作者sgq</td>
                                                <td style="width: 20%">600</td>
                                                <td style="width: 10%">2</td>
                                                <td style="width: 20%">1200</td>
                                            </tr>
                                          </tbody>
                                      </table>
                                  </td>
                                  <td class="text-center" style="vertical-align: inherit;">1700</td>
                                  <td class="text-center" style="vertical-align: inherit;">待确认</td>
                                  <td class="text-center" style="vertical-align: inherit;">
                                      <button class="btn btn-default check-pt">查看图样</button>
                                      <button class="btn btn-default">确认图样</button>
                                  </td>
                                </tr>
                                <tr>
                                  <td style="width: 55%">
                                      <table class="table">
                                          <tbody>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">8寸 头像1 作者sgq</td>
                                                <td style="width: 20%">500</td>
                                                <td style="width: 10%">1</td>
                                                <td style="width: 20%">500</td>
                                            </tr>
                                          </tbody>
                                      </table>
                                  </td>
                                  <td class="text-center">500</td>
                                  <td class="text-center">已发货</td>
                                  <td class="text-center">
                                      <button class="btn btn-default ">查看物流</button>
                                  </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!--3.3收货信息-->
            <div class="sit-item hidden" name="address" id="address">
                <div class="panel panel-default" style="margin-top: 10px">
                  <div class="panel-heading">默认收货信息</div>
                  <div class="panel-body">
                      <p>收货人姓名：<span name="lname">{{ address.lname }}</span></p>
                      <p>收货人手机：<span name="lphon">{{ address.lphon }}</span></p>
                      <p>所在地区：<span name="larea">{{ address.larea }}</span></p>
                      <p>详细地址：<span name="laddress">{{ address.laddress }}</span></p>
                  </div>
                </div>
                <div class="panel panel-default" style="margin-top: 10px">
                  <div class="panel-heading">收货信息列表</div>
                  <div class="panel-body table-responsive">
                         <!-- Table -->
                    <table class="table table-striped ">
                        <thead>
                            <tr>
                                <th>收货人</th><!--表头里的列写成th不是td-->
                                <th>收货人手机</th>
                                <th>所在地区</th>
                                <th>详细地址</th>
                                <th>操作</th>
                            </tr>
                        </thead>


                        <tbody id="lg-tbody">
                            {% for row in ad_list %}
                            <tr lg_id="{{ row.id }}">
                                <td>{{ row.lname }}</td>
                                <td>{{ row.lphon }}</td>
                                <td>{{ row.larea }}</td>
                                <td>{{ row.laddress }}</td>
                                <td>
                                    <a style="cursor: pointer" name="lg-del">删除</a>
                                </td>
                            </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                  </div>
                </div>
                <div class="panel panel-default" style="margin-top: 10px">
                  <div class="panel-heading">新建收货信息</div>
                  <div class="panel-body">
                      <!--
                      从后端数据库收货信息表中获取的该用户的多行收货信息数据（向后端发送用户id，获取收货信息表中该用户的
                      收货人姓名、手机、收货地址）
                      -->
                      <form class="form-horizontal" id="lg-info" >
                          <div class="form-group">
                            <label for="lname " class="col-sm-2 control-label">收货人</label>
                            <div class="col-sm-3">
                              <input type="text" class="form-control" id="lname" name="lname" placeholder="请填写收货人姓名" value="{{ address.lname }} " maxlength="16">
                            </div>
                          </div>
                          <div class="form-group">
                            <label for="lphon" class="col-sm-2 control-label" >收货人手机</label>
                            <div class="col-sm-3">
                              <input type="text" class="form-control" id="lphon" name="lphon"  placeholder="请填写收货人手机号码" value="{{ address.lphon}}" maxlength="11">
                            </div>
                          </div>
                          <div class="form-group">
                            <label for="larea" class="col-sm-2 control-label">所在地区</label>
                            <div class="col-sm-4">
                              <input type="text" class="form-control" id="larea" name="larea" placeholder="请填写所在地区，例如：广东省深圳市福田区" value="{{ address.larea }}" maxlength="32">
                            </div>
                          </div>
                          <div class="form-group">
                            <label for="laddress" class="col-sm-2 control-label">详细地址</label>
                            <div class="col-sm-4">
                                <textarea class="form-control" rows="3" id="laddress" name="laddress" placeholder="请填写详细地址，街道以及门牌号等" maxlength="100">{{ address.laddress }}</textarea>
                            </div>
                          </div>
                          <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                              <div class="checkbox">
                                <label>
                                  <input type="checkbox" checked="checked" id="is_default" name="is_default" value="1"> 设为默认
                                </label>
                              </div>
                            </div>
                          </div>
                          <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                              <input type="button" id="lclean" class="btn btn-default" value="清空">
                              <button type="button" id="lg-sub" class="btn btn-default">保存</button>
                              <input type="submit" style="display: none">
                              <span id='lg-tip' style="display: none;color:#e62e2e;"></span>
                            </div>
                          </div>
                        </form>
                  </div>
                </div>
            </div>
            <!--3.4安全设置-->
            <div id="safe" class="sit-item hidden" name="safe">
                <div class="panel panel-default" style="margin-top: 10px">
                    <div class="panel-heading">安全设置</div>
                    <div class="panel-body">
                        <p>更换密码：建议您定期更换密码，设置安全性高的密码可以使帐号更安全。
                            <button id="edit-pwd" class="btn btn-default" >修改</button>
                            <!--修改后提示消息-->
                            <span id="epwd-tip" class="hidden" style="color: red"></span>
                        </p>
                        <form  id="new-pwd-form" class="form-horizontal hidden" name="edit-pwd">
                            <div class="form-group">
                                <label for="old-pwd" class="col-sm-2 control-label">原密码:</label>
                                <div class="col-sm-3">
                                    <input type="password" class="form-control rpwd" id="old-pwd" placeholder="请输入原密码" name="old-pwd">
                                    <span class="error_tip"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="new-pwd" class="col-sm-2 control-label">新密码:</label>
                                <div class="col-sm-3">
                                    <input type="password" class="form-control rpwd" id="new-pwd" placeholder="请输入新密码" name="new-pwd">
                                    <span class="error_tip"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="new-cpwd" class="col-sm-2 control-label ">重复新密码:</label>
                                <div class="col-sm-3">
                                    <input type="password" class="form-control cpwd" id="new-cpwd" placeholder="请重复输入新密码">
                                    <span class="error_tip"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-offset-2 col-sm-3">
                                    <button id="safe-pwd-cancel" type="reset" class="btn btn-default form-cancel">取消</button>
                                    <button id="safe-pwd" type="button" class="btn btn-default">提交</button>
                                </div>
                            </div>
                        </form>
                        <br>
                        <p>绑定手机：{{ user.uphon|default:'还未设置' }}
                            <button id="edit-phone" class="btn btn-default">设置</button>
                             <!--修改后提示消息-->
                            <span id="ephone-tip" class="hidden" style="color: red"></span>
                        </p>
                        <form id="new-phone-form" class="form-horizontal hidden" name="edit-phone">
                            <div class="form-group">
                                <label for="phone-pwd" class="col-sm-2 control-label">密码：</label>
                                <div class="col-sm-3">
                                    <input type="password" class="form-control rpwd" id="phone-pwd" placeholder="请输入密码">

                                    <span class="error_tip"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="new-phone" class="col-sm-2 control-label">手机：</label>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control" id="new-phone" placeholder="请输入手机号" style="width: 60%;display: inline-block">
                                    <button class="btn btn-default" id="get-phoncode">获取手机验证码</button>
                                    <span class="error_tip"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="phone-codle" class="col-sm-2 control-label">验证码：</label>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" id="phone-codle" placeholder="请输入手机验证码">
                                    <span class="error_tip"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-offset-2 col-sm-3">
                                    <button id="safe-phone-cancel" type="reset" class="btn btn-default">取消</button>
                                    <button id="safe-phone" type="button" class="btn btn-default">提交</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!--3.5我的定制-->
            <div id="message" class="sit-item hidden" name="message">
                <div class="panel panel-default" style="margin-top: 10px">
                     <div class="panel-heading">我的定制</div>
                     <div class="panel-body">
                       <p>订单号：xxx</p>
                       <p>待确认图样：afdaf</p>
                       <div class="center-block">
                           <img class="img-responsive center-block" src="/static/images/slide3.png">
                           <br>
                           <div class="pull-right">
                               <button class="btn btn-default">确认图样</button>
                           </div>
                           <br>
                           <br>
                           <p>如您对图样有修改建议，请在下面填写具体内容，或与客服沟通，我们将在1周内返回修改后的图样给您确认。</p>
                           <form>
                               <textarea id='edit-advise' class="form-control" rows="3"  placeholder="请对图样提出具体修改建议，我们将在1周内返回修改后的图样。"></textarea>
                               <br>
                               <button  id='edit-picture' class="btn btn-default pull-right">修改图样</button>
                           </form>
                       </div>
                     </div>
                </div>
            </div>
            <!--3.6我的众筹-->
            <div id="crfdinfo" class="sit-item hidden" name="crfdinfo">
                <div class="panel panel-default" style="margin-top: 10px">
                     <div class="panel-heading">我的众筹</div>
                     <div class="panel-body">
                         <table class="table table-bordered">
                            <thead >
                                <tr >
                                    <th class="text-center" style="width: 55%;">作品信息<!--表头里的列写成th不是td-->
                                        <table  class="table">
                                         <thead>
                                            <tr>
                                                <th style="width: 20%">作品图片</th>
                                                <th style="width: 30%">规格尺寸</th>
                                                <th style="width: 20%">单价</th>
                                                <th style="width: 10%">数量</th>
                                                <th style="width: 20%">小计</th>
                                            </tr>
                                          </thead>
                                        </table>
                                    </th>
                                    <th class="text-center">总计</th>
                                    <th class="text-center">状态</th>
                                    <th class="text-center">操作和信息</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                  <td style="width: 55%">
                                      <table class="table">
                                          <tbody>
                                            <tr>
                                                <td style="width: 20%"><img class="img-responsive"  src="/static/images/slide3.png"></td>
                                                <td style="width: 30%">8寸 头像1 作者sgq</td>
                                                <td style="width: 20%">500</td>
                                                <td style="width: 10%">1</td>
                                                <td style="width: 20%">500</td>
                                            </tr>
                                          </tbody>
                                      </table>
                                  </td>
                                  <td class="text-center">500</td>
                                  <td class="text-center">已发货</td>
                                  <td class="text-center">
                                      <button class="btn btn-default ">查看物流</button>
                                  </td>
                                </tr>

                            </tbody>
                        </table>
                         <span style="display: inline-block;margin-right: 30px">项目订单：xxx</span>
                         <span style="display: inline-block;margin-right: 30px">项目进展：目前支持份数xx</span>
                         <span style="display: inline-block;margin-right: 30px">项目支持度：xx%</span>
                         <span style="display: inline-block;margin-right: 30px">项目到期：还剩xx天</span>


                        <p>规则说明</p>
                        <p>
                            1. 由于众筹并非商品交易，为了保证项目的正常进行，一旦您选择支持并成功付款后，
                            在收货之前不支持申请退款。付款后可在“个人中心-我的众筹”中可查看项目订单及进展。
                        </p>

                        <p>
                            2.众筹项目存在一定风险，如众筹失败，则您支持的款项将全额退回；如项目筹款成功但发货出现问题，
                            您支持的款项也将全额退回。同时，众筹商品（特殊商品除外）享受30天无理由退货。后期如对项目组织者的处理仍有疑问，可联系客服沟通处理。
                        </p>


                     </div>
                </div>
            </div>
        </div>
    </div>


<!-- 增加的内容结束-->
{% endblock cont %}
{% block js %}

<script>
        $(function() {

//  标签切换
            $('#us-tabs li a').click(function () {
                // 激活自己标签，隐藏兄弟标签
                $(this).parent().siblings().removeClass('active');
                $(this).parent().addClass('active');
                // 展现自己详细页面
                var i1 = '.sit-item[name="';
                var v = $(this).attr('name');
                var i2 = '"]';
                var tmp = i1 + v + i2;
                $(tmp).removeClass('hidden').siblings().addClass('hidden');

            });
// 个人信息页 设置手机
            $('#btn-phone').click(function () {
                // 激活安全设置标签
                $('#us-tabs li a[name="safe"]').parent().siblings().removeClass('active');
                $('#us-tabs li a[name="safe"]').parent().addClass('active');
                //  展现安全设置详细页面
                $('#safe').removeClass('hidden').siblings().addClass('hidden');
            });
//  个人信息页 设置收货地址
            $('#btn-address').click(function () {
                // 激活收货信息标签
                $('#us-tabs li a[name="address"]').parent().siblings().removeClass('active');
                $('#us-tabs li a[name="address"]').parent().addClass('active');
                // 展现收货信息详细页面
                $('#address').removeClass('hidden').siblings().addClass('hidden');
            });

//收货信息
            //手机格式检查
            $('#lphon').blur(function () {
                check_phone(this)
            });

            //清空
            $('#lclean').click(function () {
                $('#address :text').val('');//一定要加区域id #address，不然会把其他区域的input输入框全部清空
                $('#laddress').val('');
                $('#lg-tip').text('').hide();
                $('#address .error_tip').remove()
            });
            //提交
            $('#lg-sub').click(function () {

                var len1=$('#lname').val().trim().length;
                var len2=$('#lphon').val().trim().length;
                var check_lphon=check_phone('#lphon');
                var len3=$('#larea').val().trim().length;
                var len4=$('#laddress').val().trim().length;
                if(len1&&len2&&len3&&len4&&check_lphon){
                    //清空错误提示
                    $('#lg-tip').text('').hide();
                    console.log(1);
                    $.ajax({
                        url:'/user/logistics/',
                        type:'POST',
                        data:$('#lg-info').serialize(),
                        headers:{'X-CSRFtoken':$.cookie('csrftoken')},
                        dataType:'JSON',
                        success:function (data) {
                            console.log(3);
                            if(data.status){
                                //先在页面地址表中增加一条记录,插到最前端
                                var lname=$('#lname').val();
                                var lphon=$('#lphon').val();
                                var larea=$('#larea').val();
                                var laddress=$('#laddress').val();
                                var lg_id=data.data;

                                var adinfo=
                                    '<tr lg_id="'+lg_id+'">' +
                                    '<td>'+lname+'</td>'+
                                    '<td>'+lphon+'</td>'+
                                    '<td>'+larea+'</td>'+
                                    '<td>'+laddress+'</td>'+
                                    '<td> <a style="cursor: pointer" name="lg-del">删除</a> </td>'+
                                    '</tr>';
                                $('#lg-tbody').prepend(adinfo);

                                //如果是默认的，就把本页面的默认物流信息更新，获取checkbox的值是false还是ture，就是是否有选中的。

                                var is_default=$(':checkbox[name="is_default"]:checked').prop('checked');
                                if (is_default){
                                    console.log(4);
                                    $('span[name="lname"]').text(lname);
                                    $('span[name="lphon"]').text(lphon);
                                    $('span[name="larea"]').text(larea);
                                    $('span[name="laddress"]').text(laddress);

                                }else {
                                    return
                                }
                            }else{
                                var v=data.error;
                                $('#lg-tip').text(v).show();
                            }
                        }

                    })
                }else{
                    console.log(2);
                    if(len1&&len2&&len3&&len4){
                        var v='手机格式错误';
                    }else{
                        var v='不能有空项';
                    }
                    $('#lg-tip').text(v).show();
                    return false
                }
            });
            //提交回车事件 该事件无效，不知道为什么？？？？？？？？？？？，不过想想也对，不然一回车，就相应，麻烦了。
{#            $('#lg-info').submit(function () {#}
{#                $('#lg-sub').click();#}
{#                return false//必须阻断，不然会刷新页面#}
{#            });#}
            //删除收货信息记录，因为有后加的记录，所以要用委托绑定
            $('#lg-tbody').delegate('a[name="lg-del"]','click',function () {
                var lg_id=$(this).parent().parent().attr('lg_id');
                var lg_tr=$(this).parent().parent();
                $.ajax({
                    url:'/user/lg_del/',
                    type:'GET',
                    data:{'lg_id':lg_id},
                    headers:{'X-CSRFtoken':$.cookie('csrftoken')},
                    dataType:'JSON',
                    success:function (data) {
                        console.log(5);
                        //如果数据库删除成功，页面就删除该条记录，否则就什么也不做
                        if(data.status){
                            console.log(6);
                            lg_tr.remove()//在success函数内无法使用this，因此现在前面定义了lg_tr标签。现在才能捕获并删除
                        }else{
                            console.log(7);
                            return
                        }
                    }
                })
            });

//  安全设置页 密码检查
            error_password=false;
            error_check_password = false;
// 密码框检查 密码最少6位，最长16位
            $('.rpwd').blur(function () {
                var len = $(this).val().length;
                if (len < 6 || len > 16) {
                    $(this).next().html('密码最少6位，最长16位');
                    $(this).next().show();
                    error_password = false;
                }
                else {
                    $(this).next().hide();
                    error_password = true;
                }
                console.log(2)
            });
//  密码重复检查
            $('.cpwd').blur(function () {
                check_cpwd();
                console.log(3)
            });
// 安全设置 更换密码
            $('#edit-pwd').click(function () {
                $('#epwd-tip').text('');//清空该按钮错误提示
                $('#new-pwd-form .error_tip').text('');//清空密码框后的错误提示
                $('#new-pwd-form input').val('');//清空输入框的值
                $('#new-pwd-form').removeClass('hidden');//呈现密码框
            });
//   密码修改提交检查
            $('#safe-pwd').click(function () {
                $('#epwd-tip').addClass('hidden').text('');
                console.log(1);
                if(error_password && error_check_password ) {
                    console.log(7);
                    $.ajax({
                        url:'/user/chang_upwd/',
                        type:"POST",
                        headers:{'X-CSRFtoken':$.cookie('csrftoken')},
                        data:$('#new-pwd-form').serialize(),
                        dataType:"JSON",
                        traditional:true,
                        success:function (data) {
                            if(data.status){
                                console.log(9);
                                var v='修改成功，下次使用新密码登录。';
                            }else {
                                console.log(10);
                                var v=data.error;
                            }
                            $('#epwd-tip').removeClass('hidden').text(v);
                        },
                        error:function(data){
	    		            $('#epwd-tip').removeClass('hidden').text('网络故障,修改失败');
	    		        }
                    });
                    $('#new-pwd-form').addClass('hidden');

                } else {
                    console.log(8);
                    // $(this).addAttr('disabled','disabled');
                    return false;
                }

            });
            $('#safe-pwd-cancel').click(function () {
                $('#new-pwd-form').addClass('hidden')
            });
//  安全设置 绑定手机
            $('#edit-phone').click(function () {
                $('#ephone-tip').text('');//清空错误提示
                $('#new-phone-form').removeClass('hidden');
            });
            $('#safe-phone').click(function () {
                console.log(1);
                $.ajax({
                    url:'{{ request.path }}',
                    type:"POST",
                    headers:{'X-CSRFtoken':$.cookie('csrftoken')},
                    data:$(this).parent().serialize(),
                    dataType:"JSON",
                    traditional:true,
                    success:function (data) {
                        var v=data.message;
                        $('#ephone-tip').html(v);
                    },
                    error:function(data){
	    		        $('#ephone-tip').removeClass('hidden').text('网络故障,修改失败');
	    		    }
                });
                $('#new-phone-form').addClass('hidden')
            });
            $('#safe-phone-cancel').click(function () {
                $('#new-phone-form').addClass('hidden')
            });

//  订单页 查看图样按钮跳转到待确认消息页
            $('.check-pt').click(function(){
                /*激活待确认消息标签*/
                $('#us-tabs li a[name="message"]').parent().siblings().removeClass('active');
                $('#us-tabs li a[name="message"]').parent().addClass('active');
            /* 展现待确认消息详细页面*/
                $('#message').removeClass('hidden').siblings().addClass('hidden');
            });


//  待确认消息页 修改图样按钮
            $('#edit-picture').click(function () {
                var len=$('#edit-advise').val().length;
                if (len===0){
                    alert("建议不能为空!");
                    console.log(9);
                    return false;
                }else {
                    var v=confirm('您确定要修改吗?');
                    console.log(0);
                    return v;
                }
            });



        });


//  密码重复检查程序
        function check_cpwd(){
            var pass = $('#new-pwd').val();
            var cpass = $('.cpwd').val();

            if (pass !== cpass) {
                $('.cpwd').next().html('两次输入的密码不一致').show();;

                error_check_password = false;
            }else {
                $('.cpwd').next().hide();
                error_check_password = true;
            }
        }
//手机格式检查函数
function check_phone(self) {
    $(self).next().remove();

   //取得输入框的值
    var lp=$(self).val();
    //把取得的值转为数字
    var lp=parseInt(lp);
   //定义正则
    var reg=/^[1][3|5|8]\d{9}$/;
    //验证 true 还是 false
    var ret=reg.test(lp);
    if(!ret){
        var v='格式错误';
        var tag='<span class="error_tip">'+v+'</span>';
        //增加错误提示标签在后
        $(self).after(tag);
        $(self).next().show();
        return false
    }else{
        return true
    }

}
</script>
{% endblock js %}






